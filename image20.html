// ...existing code...
    <script>
        // --- åœ–ç‰‡èˆ‡åº§æ¨™è¨­å®šå€ ---
        
        const gameImages = [
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/1.png',
                differences: [
                    { x: 1065, y: 603, found: false },
                    { x: 1248, y: 707, found: false },
                    { x: 1094, y: 854, found: false },
                    { x: 1351, y: 866, found: false },
                    { x: 1542, y: 821, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/2.png',
                differences: [
                    { x: 1341, y: 830, found: false },
                    { x: 1086, y: 798, found: false },
                    { x: 1241, y: 664, found: false },
                    { x: 1078, y: 569, found: false },
                    { x: 1258, y: 939, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/3.png',
                differences: [
                    { x: 1642, y: 581, found: false },
                    { x: 1647, y: 780, found: false },
                    { x: 1485, y: 885, found: false },
                    { x: 1141, y: 791, found: false },
                    { x: 1086, y: 602, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/4.png',
                differences: [
                    { x: 1093, y: 697, found: false },
                    { x: 1117, y: 875, found: false },
                    { x: 1283, y: 758, found: false },
                    { x: 1566, y: 860, found: false },
                    { x: 1607, y: 678, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/5.png',
                differences: [
                    { x: 1496, y: 862, found: false },
                    { x: 1374, y: 956, found: false },
                    { x: 1302, y: 718, found: false },
                    { x: 1145, y: 831, found: false },
                    { x: 1117, y: 693, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/6.png',
                differences: [
                    { x: 1586, y: 775, found: false },
                    { x: 1646, y: 549, found: false },
                    { x: 1254, y: 701, found: false },
                    { x: 1069, y: 572, found: false },
                    { x: 1117, y: 805, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/7.png',
                differences: [
                    { x: 1561, y: 856, found: false },
                    { x: 1435, y: 971, found: false },
                    { x: 1331, y: 845, found: false },
                    { x: 1139, y: 941, found: false },
                    { x: 1065, y: 594, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/8.png',
                differences: [
                    { x: 1142, y: 859, found: false },
                    { x: 1259, y: 938, found: false },
                    { x: 1502, y: 956, found: false },
                    { x: 1550, y: 819, found: false },
                    { x: 1290, y: 699, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/9.png',
                differences: [
                    { x: 1637, y: 717, found: false },
                    { x: 1528, y: 811, found: false },
                    { x: 1644, y: 920, found: false },
                    { x: 1436, y: 966, found: false },
                    { x: 1199, y: 924, found: false },
                    { x: 1091, y: 837, found: false }  /* â† æ–°å¢ç¬¬å…­å€‹ï¼ˆç¯„ä¾‹ï¼‰ */
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/10.png',
                differences: [
                    { x: 1069, y: 897, found: false },
                    { x: 1169, y: 749, found: false },
                    { x: 1398, y: 842, found: false },
                    { x: 1501, y: 923, found: false },
                    { x: 1272, y: 938, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/11.png',
                differences: [
                    { x: 1538, y: 805, found: false },
                    { x: 1102, y: 827, found: false },
                    { x: 1649, y: 908, found: false },
                    { x: 1312, y: 723, found: false },
                    { x: 1453, y: 967, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/12.png',
                differences: [
                    { x: 1080, y: 904, found: false },
                    { x: 1054, y: 753, found: false },
                    { x: 1524, y: 882, found: false },
                    { x: 1671, y: 853, found: false },
                    { x: 1206, y: 978, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/13.png',
                differences: [
                    { x: 1183, y: 749, found: false },
                    { x: 1217, y: 919, found: false },
                    { x: 1405, y: 975, found: false },
                    { x: 1420, y: 834, found: false },
                    { x: 1538, y: 923, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/14.png',
                differences: [
                    { x: 1561, y: 819, found: false },
                    { x: 1520, y: 956, found: false },
                    { x: 1224, y: 734, found: false },
                    { x: 1061, y: 638, found: false },
                    { x: 1631, y: 616, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/15.png',
                differences: [
                    { x: 1191, y: 642, found: false },
                    { x: 1065, y: 745, found: false },
                    { x: 1065, y: 520, found: false },
                    { x: 1420, y: 964, found: false },
                    { x: 1109, y: 860, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/16.png',
                differences: [
                    { x: 1109, y: 801, found: false },
                    { x: 1616, y: 867, found: false },
                    { x: 1512, y: 986, found: false },
                    { x: 1390, y: 949, found: false },
                    { x: 1065, y: 560, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/17.png',
                differences: [
                    { x: 1250, y: 675, found: false },
                    { x: 1106, y: 786, found: false },
                    { x: 1461, y: 923, found: false },
                    { x: 1524, y: 779, found: false },
                    { x: 1623, y: 572, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/18.png',
                differences: [
                    { x: 1409, y: 845, found: false },
                    { x: 1568, y: 864, found: false },
                    { x: 1686, y: 657, found: false },
                    { x: 1331, y: 664, found: false },
                    { x: 1039, y: 564, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/19.png',
                differences: [
                    { x: 1609, y: 879, found: false },
                    { x: 1472, y: 941, found: false },
                    { x: 1268, y: 856, found: false },
                    { x: 1076, y: 908, found: false },
                    { x: 1128, y: 749, found: false }
                ]
            },
            {
                name: './éŠæˆ²åœ–ç‰‡-20251130T032810Z-1-001/éŠæˆ²åœ–ç‰‡/20.png',
                differences: [
                    { x: 1642, y: 871, found: false },
                    { x: 1405, y: 919, found: false },
                    { x: 1505, y: 978, found: false },
                    { x: 1239, y: 886, found: false },
                    { x: 1172, y: 971, found: false }
                ]
            }
        ];

        // éš¨æ©Ÿé¸æ“‡ä¸€å¼µåœ–ç‰‡
        function getRandomImage() {
            const randomIndex = Math.floor(Math.random() * gameImages.length);
            return gameImages[randomIndex];
        }

        const selectedImage = getRandomImage();
        let differences = JSON.parse(JSON.stringify(selectedImage.differences)); // æ·±æ‹·è²ï¼Œé¿å…ä¿®æ”¹åŸé™£åˆ—
        
        const tolerance = 40;
        let foundCount = 0;
        const totalCount = differences.length;

        // --- éŠæˆ²é‚è¼¯ ---

        const gameArea = document.getElementById('game-area');
        const gameImg = document.getElementById('game-img');
        const statusText = document.getElementById('status');
        const countText = document.getElementById('found-count');
        // ç¢ºä¿ gameArea ç‚ºå®šä½å®¹å™¨
        if (gameArea) {
            const s = window.getComputedStyle(gameArea);
            if (s.position === 'static') gameArea.style.position = 'relative';
            gameArea.style.boxSizing = 'border-box';
        }

        // è¨­å®šéš¨æ©Ÿé¸ä¸­çš„åœ–ç‰‡
        gameImg.src = selectedImage.name;

        // æ§åˆ¶éŠæˆ²æ˜¯å¦å·²é–‹å§‹
        let gameStarted = false;
        const introOverlay = document.getElementById('intro-overlay');
        const startBtn = document.getElementById('start-btn');

        startBtn.addEventListener('click', () => {
            introOverlay.style.display = 'none';
            gameArea.classList.remove('hidden');
            gameStarted = true;
        });

        // é˜²çŸ­æ™‚é–“é‡è¤‡é»æ“Š
        let _lastClickAt = 0;
        // é»æ“Šäº‹ä»¶ç›£è½ï¼ˆæ”¹ç‚º for-loopï¼Œå‘½ä¸­å¾Œç«‹å³è·³å‡ºï¼‰
        gameImg.addEventListener('click', function(e) {
            if (!gameStarted) return;
            const now = Date.now();
            if (now - _lastClickAt < 200) return; // å¿½ç•¥ 200ms å…§çš„é‡è¤‡äº‹ä»¶
            _lastClickAt = now;

            const rect = gameImg.getBoundingClientRect();
            const scaleX = gameImg.naturalWidth / rect.width;
            const scaleY = gameImg.naturalHeight / rect.height;
            const clickX = (e.clientX - rect.left) * scaleX;
            const clickY = (e.clientY - rect.top) * scaleY;
            console.log(`åº§æ¨™ç´€éŒ„: x: ${Math.round(clickX)}, y: ${Math.round(clickY)}`);

            let hit = false;
            // ä»¥ for loop æ‰¾åˆ°ç¬¬ä¸€å€‹å‘½ä¸­çš„ difference å°±åœæ­¢ï¼Œé¿å…ç•«å‡ºå¤šå€‹åœˆ
            for (let i = 0; i < differences.length; i++) {
                const diff = differences[i];
                if (diff.found) continue;
                const dx = clickX - diff.x;
                const dy = clickY - diff.y;
                const dist = Math.hypot(dx, dy);
                // tolerance æ˜¯ä»¥åŸå§‹åœ–ç‰‡åƒç´ ç‚ºå–®ä½ï¼ˆclickX/clickY èˆ‡ diff.x/diff.y éƒ½æ˜¯ natural pixelsï¼‰
                if (dist < tolerance) {
                    hit = true;
                    diff.found = true;
                    foundCount++;
                    countText.textContent = foundCount;
                    drawCircle(diff.x, diff.y, scaleX, scaleY);
                    if (foundCount === totalCount) {
                        statusText.textContent = "æ­å–œéé—œï¼ä½ çš„è§€å¯ŸåŠ›å¤ªå¼·äº†ï¼ğŸ†";
                        statusText.style.color = "#00ff00";
                    }
                    break; // æ‰¾åˆ°ç¬¬ä¸€å€‹å°±é›¢é–‹ï¼Œé¿å…åŒæ¬¡é»æ“Šå‘½ä¸­å¤šå€‹
                }
            }

            if (!hit && foundCount < totalCount) {
                console.log("æ²’é»ä¸­...");
            }
        });

        function drawCircle(x, y) {
            // x,y = natural image coords
            // ä½¿ç”¨ getBoundingClientRect ç¢ºä¿è€ƒæ…®é¡¯ç¤ºå¤§å°èˆ‡ä½ç½®
            const imgRect = gameImg.getBoundingClientRect();
            const areaRect = gameArea.getBoundingClientRect();

            if (!imgRect.width || !imgRect.height) return;

            // è¨ˆç®— scale èˆ‡é¡¯ç¤ºåº§æ¨™ï¼ˆç›¸å°æ–¼ image å·¦ä¸Šï¼‰
            const scale = imgRect.width / gameImg.naturalWidth;
            const displayX = Math.round(x * scale);
            const displayY = Math.round(y * (imgRect.height / gameImg.naturalHeight));

            // image ç›¸å°æ–¼ gameArea çš„åç§»ï¼ˆviewport åº§æ¨™å·®ï¼‰
            const offsetX = imgRect.left - areaRect.left;
            const offsetY = imgRect.top - areaRect.top;

            const circle = document.createElement('div');
            circle.classList.add('circle');
            Object.assign(circle.style, {
                width: '30px',
                height: '30px',
                borderRadius: '50%',
                background: 'rgba(255,0,0,0.12)',
                border: '3px solid rgba(255,0,0,0.9)',
                position: 'absolute',
                left: (offsetX + displayX) + 'px',
                top: (offsetY + displayY) + 'px',
                transform: 'translate(-50%,-50%)',
                pointerEvents: 'none',
                zIndex: 9999
            });

            gameArea.appendChild(circle);
        }
    </script>
// ...existing code...